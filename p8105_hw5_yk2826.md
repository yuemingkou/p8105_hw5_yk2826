Homework 5
================

Problem 1
---------

Create a tidy dataframe containing data from all participants:

First, start with a dataframe containing all file names and read in data:

``` r
longitudinal_df = 
  tibble(file_names = list.files("./data/")) %>% 
  mutate(subject_data = map(str_c("./data/", file_names), read_csv))
```

Then, tidy the dataset:

``` r
longitudinal_tidy = 
  longitudinal_df %>% 
  unnest %>% 
  mutate(file_names = str_replace(file_names, ".csv", "")) %>% 
  separate(file_names, into = c("arm", "subject_ID"), sep = "_") %>% 
  mutate(arm = str_replace(arm, "con", "control"),
         arm = str_replace(arm, "exp", "experimental")) %>% 
  gather(key = week, value = observation, week_1:week_8) %>% 
  mutate(week = str_replace(week, "week_", ""),
         week = as.integer(week)) %>% 
  arrange(arm, subject_ID)
```

Look at the resulting dataset:

``` r
longitudinal_tidy
```

    ## # A tibble: 160 x 4
    ##    arm     subject_ID  week observation
    ##    <chr>   <chr>      <int>       <dbl>
    ##  1 control 01             1        0.2 
    ##  2 control 01             2       -1.31
    ##  3 control 01             3        0.66
    ##  4 control 01             4        1.96
    ##  5 control 01             5        0.23
    ##  6 control 01             6        1.09
    ##  7 control 01             7        0.05
    ##  8 control 01             8        1.94
    ##  9 control 02             1        1.13
    ## 10 control 02             2       -0.88
    ## # ... with 150 more rows

``` r
str(longitudinal_tidy)
```

    ## Classes 'tbl_df', 'tbl' and 'data.frame':    160 obs. of  4 variables:
    ##  $ arm        : chr  "control" "control" "control" "control" ...
    ##  $ subject_ID : chr  "01" "01" "01" "01" ...
    ##  $ week       : int  1 2 3 4 5 6 7 8 1 2 ...
    ##  $ observation: num  0.2 -1.31 0.66 1.96 0.23 1.09 0.05 1.94 1.13 -0.88 ...

Make a spaghetti plot showing observations on each subject over time, and comment on differences between groups:

``` r
longitudinal_tidy %>% 
  mutate(ID = str_c(arm, "_", subject_ID)) %>% 
  ggplot(aes(x = week, y = observation, group = ID, color = arm)) + 
    geom_line() + 
    labs(
      title = "Observations on each subject over time",
      x = "Week",
      y = "Observation",
      caption = "Data from the longitudinal study"
    ) 
```

<img src="p8105_hw5_yk2826_files/figure-markdown_github/spaghetti_plot-1.png" width="90%" />

From the sphaghetti plot, the experimental group and control group had similar observations at baseline. However, the observations of subjects in experimental group are generally higher than observations of subjects in control group through 8 weeks. The difference between two groups increased over time since subjects assigned to the experimental arm had increasing observation values across weeks while subjects assigned to the control arm had relatively constant observation values.
